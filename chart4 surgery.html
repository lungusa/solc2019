<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chartSurgery {
    min-width: 310px;
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/

  .highcharts-title {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-title{
    font-family: "Lato", sans-serif;
    font-size: 16px;
    font-weight: bold;
  }

  .highcharts-grid-line{
    opacity: 0.6;
  }

  @media (max-width: 700px) {
    #chartSurgery {
      /*height: 1000px;*/
    }
  }
</style>

<!-- 860px min height before font gets messed up -->
<div id="chartSurgery"></div>

<script>
  var state = Cookies.get('state');
  // bar on graph changes to green based on state selection
  if (state == "MA") {
    var tooltipSurg = 0;
  } else if (state == "RI") {
    var tooltipSurg = 1;
  } else if (state == "NY") {
    var tooltipSurg = 2;
  } else if (state == "CT") {
    var tooltipSurg = 3;
  } else if (state == "NJ") {
    var tooltipSurg = 4;
  } else if (state == "NH") {
    var tooltipSurg = 5;
  } else if (state == "MD") {
    var tooltipSurg = 6;
  } else if (state == "UT") {
    var tooltipSurg = 7;
  } else if (state == "MN") {
    var tooltipSurg = 8;
  } else if (state == "ME") {
    var tooltipSurg = 9;
  } else if (state == "PA") {
    var tooltipSurg = 10;
  } else if (state == "WI") {
    var tooltipSurg = 11;
  } else if (state == "IL") {
    var tooltipSurg = 12;
  } else if (state == "FL") {
    var tooltipSurg = 13;
  } else if (state == "CA") {
    var tooltipSurg = 14;
  } else if (state == "NE") {
    var tooltipSurg = 15;
  } else if (state == "Nation") {
    var tooltipSurg = 16;
  } else if (state == "OH") {
    var tooltipSurg = 17;
  } else if (state == "OR") {
    var tooltipSurg = 18;
  } else if (state == "VA") {
    var tooltipSurg = 19;
  } else if (state == "KY") {
    var tooltipSurg = 20;
  } else if (state == "CO") {
    var tooltipSurg = 21;
  } else if (state == "WA") {
    var tooltipSurg = 22;
  } else if (state == "NC") {
    var tooltipSurg = 23;
  } else if (state == "TN") {
    var tooltipSurg = 24;
  } else if (state == "MI") {
    var tooltipSurg = 25;
  } else if (state == "SC") {
    var tooltipSurg = 26;
  } else if (state == "MT") {
    var tooltipSurg = 27;
  } else if (state == "ID") {
    var tooltipSurg = 28;
  } else if (state == "WV") {
    var tooltipSurg = 29;
  } else if (state == "DE") {
    var tooltipSurg = 30;
  } else if (state == "ND") {
    var tooltipSurg = 31;
  } else if (state == "MO") {
    var tooltipSurg = 32;
  } else if (state == "HI") {
    var tooltipSurg = 33;
  } else if (state == "GA") {
    var tooltipSurg = 34;
  } else if (state == "VT") {
    var tooltipSurg = 35;
  } else if (state == "AL") {
    var tooltipSurg = 36;
  } else if (state == "IA") {
    var tooltipSurg = 37;
  } else if (state == "AR") {
    var tooltipSurg = 38;
  } else if (state == "IN") {
    var tooltipSurg = 39;
  } else if (state == "MS") {
    var tooltipSurg = 40
  } else if (state == "LA") {
    var tooltipSurg = 41;
  } else if (state == "AZ") {
    var tooltipSurg = 42;
  } else if (state == "TX") {
    var tooltipSurg = 43;
  } else if (state == "WY") {
    var tooltipSurg = 44;
  } else if (state == "AK") {
    var tooltipSurg = 45;
  } else if (state == "SD") {
    var tooltipSurg = 46;
  } else if (state == "OK") {
    var tooltipSurg = 47;
  } else if (state == "NM") {
    var tooltipSurg = 48;
  } else {
    var tooltipSurg = 16;
  }

  var chartSurgery = function() {
    Highcharts.setOptions({
      colors: ["#3a75c4", "#7fba00"]
    })

    Highcharts.chart("chartSurgery", {
      chart: {
        events: {
          load: function() {
            var stateBox = this.series[0].points[tooltipSurg];
            this.tooltip.refresh(stateBox);
          }
        },
        type: "column",
        height: 400
      },
      title: {
        text: "State Ranking by Percent of Cases Treated with Surgery",
        style: {
          fontWeight: "bold"
        }
      },
      credits: {
        enabled: false
      },
      tooltip: {
        formatter: function(){
          return '<b>' + this.x + '</b>: ' + Highcharts.numberFormat(this.y, 1);
        },
        style: {
          "fontSize": "16px",
          "fontFamily": "'Lato', sans-serif"
        }
      },
      legend: {
        enabled: false
      },
      xAxis: {
        labels: {
          enabled: false
        },
        plotBands: [{
            from: -0.5,
            to: 2.5,
            color: "#ddf5c6",
            label: {
              text: "Top<br>Tier",
              style: {
                color: "#000000"
              },
              y: 10
            }
          },
          {
            from: 2.5,
            to: 8.5,
            color: "#f4faba",
            label: {
              text: "Above<br/>Average<br>Tier",
              style: {
                color: "#000000"
              },
              y: 30
            }
          },
          {
            from: 8.5,
            to: 24.5,
            color: "#e8eaea",
            label: {
              text: "Average<br>Tier",
              style: {
                color: "#000000"
              },
              y: 60
            }
          },
          {
            from: 24.5,
            to: 41.5,
            color: "#fdecb8",
            label: {
              text: "Below<br/>Average<br>Tier",
              style: {
                color: "#000000"
              },
              y: 80
            }
          }, {
            from: 41.5,
            to: 48.5,
            color: "#fadfbf",
            label: {
              text: "Bottom<br>Tier",
              style: {
                color: "#000000"
              },
              y: 110
            }
          }
        ],
        categories: [
          "Massachusetts",
          "Rhode Island",
          "New York",
          "Connecticut",
          "New Jersey",
          "New Hampshire",
          "Maryland",
          "Utah",
          "Minnesota",
          "Maine",
          "Pennsylvania",
          "Wisconsin",
          "Illinois",
          "Florida",
          "California",
          "Nebraska",
          "Nation",
          "Ohio",
          "Oregon",
          "Virginia",
          "Kentucky",
          "Colorado",
          "Washington",
          "North Carolina",
          "Tennessee",
          "Michigan",
          "South Carolina",
          "Montana",
          "Idaho",
          "West Virginia",
          "Delaware",
          "North Dakota",
          "Missouri",
          "Hawaii",
          "Georgia",
          "Vermont",
          "Alabama",
          "Iowa",
          "Arkansas",
          "Indiana",
          "Mississippi",
          "Louisiana",
          "Arizona",
          "Texas",
          "Wyoming",
          "Alaska",
          "South Dakota",
          "Oklahoma",
          "New Mexico"
        ]
      },
      yAxis: {
        min: 0,
        title: {
          text: "Percent of Cases Receiving Surgery as part of First Course of Treatment"
        },
        labels: {
          style: {
            "fontSize": "16px"
          }
        }
      },

      plotOptions: {
        series: {
          stacking: "normal"
        }
      },
      series: [{
        name: "States",
        data: [
          30.5,
          27.6,
          27.0,
          26.5,
          25.8,
          25.2,
          24.4,
          24.2,
          22.9,
          22.6,
          22.5,
          21.5,
          21.2,
          21.1,
          21.0,
          20.9,
          20.6,
          20.4,
          20.4,
          20.4,
          20.2,
          20.1,
          19.4,
          19.3,
          19.3,
          19.2,
          19.2,
          19.1,
          19.0,
          18.8,
          18.8,
          18.8,
          18.6,
          18.6,
          18.6,
          18.4,
          18.0,
          17.4,
          17.4,
          17.2,
          16.9,
          16.8,
          16.4,
          16.0,
          15.7,
          15.7,
          15.7,
          14.9,
          13.5
        ]
      }],
      dataLabels: {
        style: {
          fontFamily: "'Lato', sans-serif"
        }
      }
    });
    // hide credits
    // $(".highcharts-credits").html("");
  };

  $(document).ready(function() {
    chartSurgery();
    $("#chartSurgery .highcharts-color-0").css("fill", "#3a75c4");
    $("#chartSurgery .highcharts-legend-item rect").css("fill", "#3a75c4");

    var state = Cookies.get('state');
    // bar on graph changes to green based on state selection
    if (state == "MA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(1)").css("fill", "#ed1b2d");
    }
    else if (state == "RI") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(2)").css("fill", "#ed1b2d");
    }
    else if (state == "NY") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(3)").css("fill", "#ed1b2d");
    }
    else if (state == "CT") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(4)").css("fill", "#ed1b2d");
    }
    else if (state == "NJ") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(5)").css("fill", "#ed1b2d");
    }
    else if (state == "NH") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(6)").css("fill", "#ed1b2d");
    }
    else if (state == "MD") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(7)").css("fill", "#ed1b2d");
    }
    else if (state == "UT") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(8)").css("fill", "#ed1b2d");
    }
    else if (state == "MN") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(9)").css("fill", "#ed1b2d");
    }
    else if (state == "ME") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(10)").css("fill", "#ed1b2d");
    }
    else if (state == "PA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(11)").css("fill", "#ed1b2d");
    }
    else if (state == "WI") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(12)").css("fill", "#ed1b2d");
    }
    else if (state == "IL") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(13)").css("fill", "#ed1b2d");
    }
    else if (state == "FL") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(14)").css("fill", "#ed1b2d");
    }
    else if (state == "CA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(15)").css("fill", "#ed1b2d");
    }
    else if (state == "NE") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(16)").css("fill", "#ed1b2d");
    }
    else if (state == "Nation") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(17)").css("fill", "#ed1b2d");
    }
    else if (state == "OH") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(18)").css("fill", "#ed1b2d");
    }
    else if (state == "OR") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(19)").css("fill", "#ed1b2d");
    }
    else if (state == "VA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(20)").css("fill", "#ed1b2d");
    }
    else if (state == "KY") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(21)").css("fill", "#ed1b2d");
    }
    else if (state == "CO") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(22)").css("fill", "#ed1b2d");
    }
    else if (state == "WA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(23)").css("fill", "#ed1b2d");
    }
    else if (state == "NC") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(24)").css("fill", "#ed1b2d");
    }
    else if (state == "TN") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(25)").css("fill", "#ed1b2d");
    }
    else if (state == "MI") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(26)").css("fill", "#ed1b2d");
    }
    else if (state == "SC") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(27)").css("fill", "#ed1b2d");
    }
    else if (state == "MT") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(28)").css("fill", "#ed1b2d");
    }
    else if (state == "ID") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(29)").css("fill", "#ed1b2d");
    }
    else if (state == "WV") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(30)").css("fill", "#ed1b2d");
    }
    else if (state == "DE") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(31)").css("fill", "#ed1b2d");
    }
    else if (state == "ND") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(32)").css("fill", "#ed1b2d");
    }
    else if (state == "MO") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(33)").css("fill", "#ed1b2d");
    }
    else if (state == "HI") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(34)").css("fill", "#ed1b2d");
    }
    else if (state == "GA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(35)").css("fill", "#ed1b2d");
    }
    else if (state == "VT") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(36)").css("fill", "#ed1b2d");
    }
    else if (state == "AL") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(37)").css("fill", "#ed1b2d");
    }
    else if (state == "IA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(38)").css("fill", "#ed1b2d");
    }
    else if (state == "AR") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(39)").css("fill", "#ed1b2d");
    }
    else if (state == "IN") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(40)").css("fill", "#ed1b2d");
    }
    else if (state == "MS") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(41)").css("fill", "#ed1b2d");
    }
    else if (state == "LA") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(42)").css("fill", "#ed1b2d");
    }
    else if (state == "AZ") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(43)").css("fill", "#ed1b2d");
    }
    else if (state == "TX") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(44)").css("fill", "#ed1b2d");
    }
    else if (state == "WY") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(45)").css("fill", "#ed1b2d");
    }
    else if (state == "AK") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    else if (state == "SD") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(47)").css("fill", "#ed1b2d");
    }
    else if (state == "OK") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(48)").css("fill", "#ed1b2d");
    }
    else if (state == "NM") {
      $("#chartSurgery .highcharts-series-group rect:nth-child(49)").css("fill", "#ed1b2d");
    }

    //nationwide highlight
    $("#chartSurgery .highcharts-series-group rect:nth-child(17)").css("fill", "#555559");


  })
  // var state = function(){
  // }
</script>
