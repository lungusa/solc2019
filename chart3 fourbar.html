<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chart5 {
    min-width: 310px;
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .fakeMargin {
    /*height: 100px;*/
  }

  #highchartsCredit {
    display: none;
    /*margin-top: 100px;*/
    /*font-size: 10px !important;*/
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/

  .highcharts-title tspan {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-title tspan {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  #datatable {
    display: none;
  }

  @media (max-width: 700px) {
    #chart5 {
      /*height: 1000px;*/
    }
  }
</style>

<div id="chart5"></div>

<table id="datatable">
  <thead>
    <tr>
      <th></th>
      <th id="stateChart">Percent of Cases Diagnosed at Stage</th>
      <th>5-Year Survival</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Percent of Cases Diagnosed at Stage</th>
      <td id="m" id="m">50</td>
      <td id="q">18.9</td>
    </tr>
    <tr>
      <th>5-Year Survival</th>
      <td id="n" id="n">50</td>
      <td id="r">49.8</td>
    </tr>
  </tbody>
</table>

<div class="fakeMargin"></div>

<!-- <a id="highchartsCredit" href="https://www.highcharts.com">Charts by Highcharts.com</a> -->




<script type="text/javascript">
  var note = "";
  var state = Cookies.get('state');
  // console.log('!!!!!!!!state is: ' + Cookies.get('state'));
  if (state == "AL") {
    $("#m").html("18.8");
    $("#n").html("45.2");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Alabama");
  } else if (state == "AK") {
    $("#m").html("15.8");
    $("#n").html("55.2");
    $("#q").html("55.3");
    $("#r").html("4.4");
    note = "<br>(National data used for survival at the local stage as this state does not have these data available.)";
    // $("#stateChart").html("Alaska");
    //NATIONAL RATE NEEDED HERE
    // $(".highcharts-legend .highcharts-legend-item:nth-child(2) text").html("Nation?");
  } else if (state == "AZ") {
    $("#m").html("19.1");
    $("#n").html("41.1");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Arizona");
  } else if (state == "AR") {
    $("#m").html("20.5");
    $("#n").html("48.6");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Arkansas");
  } else if (state == "CA") {
    $("#m").html("18.5");
    $("#n").html("54.3");
    $("#q").html("56.9");
    $("#r").html("5.0");
    // $("#stateChart").html("California");
  } else if (state == "CO") {
    $("#m").html("20.3");
    $("#n").html("50.4");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Colorado");
  } else if (state == "CT") {
    $("#m").html("21.8");
    $("#n").html("50.4");
    $("#q").html("65.3");
    $("#r").html("5.1");
    // $("#stateChart").html("Connecticut");
  } else if (state == "DE") {
    $("#m").html("20.1");
    $("#n").html("53.3");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Delaware");
  } else if (state == "DC") {
    $("#m").html("16.8");
    $("#n").html("48.2");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("District of Columbia");
  } else if (state == "FL") {
    $("#m").html("20.1");
    $("#n").html("46.9");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Florida");
  } else if (state == "GA") {
    $("#m").html("18.4");
    $("#n").html("53.3");
    $("#q").html("49.8");
    $("#r").html("4.2");
    // $("#stateChart").html("Georgia");
  } else if (state == "HI") {
    $("#m").html("15.0");
    $("#n").html("55.5");
    $("#q").html("59.2");
    $("#r").html("6.0");
    // $("#stateChart").html("Hawaii");
  } else if (state == "ID") {
    $("#m").html("18.7");
    $("#n").html("54.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Idaho");
  } else if (state == "IL") {
    $("#m").html("19.4");
    $("#n").html("51.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Illinois");
  } else if (state == "IN") {
    $("#m").html("18.8");
    $("#n").html("52.2");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Indiana");
  } else if (state == "IA") {
    $("#m").html("17.4");
    $("#n").html("56.2");
    $("#q").html("49.9");
    $("#r").html("4.3");
    // $("#stateChart").html("Iowa");
  } else if (state == "ID") {
    $("#m").html("18.7");
    $("#n").html("54.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    // $("#stateChart").html("Idaho");
  } else if (state == "KS") {
    $("#m").html("18.9");
    $("#n").html("49.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>National data used as this state does not have data on stage at diagnosis or survival by stage available.)";
    // $("#stateChart").html("Kansas");
    //NATIONAL RATE NEEDED HERE
  } else if (state == "KY") {
    $("#m").html("18.1");
    $("#n").html("52.5");
    $("#q").html("48.8");
    $("#r").html("3.2");
    // $("#stateChart").html("Kentucky");
  } else if (state == "LA") {
    $("#m").html("18.5");
    $("#n").html("54.3");
    $("#q").html("41.0");
    $("#r").html("3.3");
    // $("#stateChart").html("Louisiana");
  } else if (state == "ME") {
    $("#m").html("19.2");
    $("#n").html("50.6");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Maine");
  } else if (state == "MD") {
    $("#m").html("19.6");
    $("#n").html("47.0");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Maryland");
  } else if (state == "MA") {
    $("#m").html("23.2");
    $("#n").html("46.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Massachusetts");
  } else if (state == "MI") {
    $("#m").html("18.2");
    $("#n").html("51.2");
    $("#q").html("56.3");
    $("#r").html("4.4");
    // $("#stateChart").html("Michigan");
  } else if (state == "MN") {
    $("#m").html("18.9");
    $("#n").html("49.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used as this state does not have data on stage at diagnosis or survival by stage available.)";
    // $("#stateChart").html("Minnesota");
    //NATIONAL RATE NEEDED HERE
  } else if (state == "MS") {
    $("#m").html("18.3");
    $("#n").html("53.9");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Mississippi");
  } else if (state == "MO") {
    $("#m").html("18.6");
    $("#n").html("48.9");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Missouri");
  } else if (state == "MT") {
    $("#m").html("18.1");
    $("#n").html("51.4");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Montana");
  } else if (state == "NE") {
    $("#m").html("18.8");
    $("#n").html("49.3");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Nebraska");
  } else if (state == "NV") {
    $("#m").html("15.7");
    $("#n").html("42.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Nevada");
  } else if (state == "NH") {
    $("#m").html("19.8");
    $("#n").html("49.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("New Hampshire");
  } else if (state == "NJ") {
    $("#m").html("19.7");
    $("#n").html("48.8");
    $("#q").html("64.7");
    $("#r").html("4.7");
    // $("#stateChart").html("New Jersey");
  } else if (state == "NM") {
    $("#m").html("17.8");
    $("#n").html("49.1");
    $("#q").html("48.7");
    $("#r").html("4.8");
    // $("#stateChart").html("New Mexico");
  } else if (state == "NY") {
    $("#m").html("21.1");
    $("#n").html("49.4");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("New York");
  } else if (state == "NC") {
    $("#m").html("19.0");
    $("#n").html("50.0");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("North Carolina");
  } else if (state == "ND") {
    $("#m").html("19.1");
    $("#n").html("53.0");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("North Dakota");
  } else if (state == "OH") {
    $("#m").html("17.3");
    $("#n").html("47.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Ohio");
  } else if (state == "OK") {
    $("#m").html("16.6");
    $("#n").html("48.0");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Oklahoma");
  } else if (state == "OR") {
    $("#m").html("15.0");
    $("#n").html("47.6");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Oregon");
  } else if (state == "PA") {
    $("#m").html("18.1");
    $("#n").html("52.5");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Pennsylvania");
  } else if (state == "RI") {
    $("#m").html("20.4");
    $("#n").html("49.7");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Rhode Island");
  } else if (state == "SC") {
    $("#m").html("17.8");
    $("#n").html("47.1");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("South Carolina");
  } else if (state == "SD") {
    $("#m").html("19.0");
    $("#n").html("52.9");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("South Dakota");
  } else if (state == "TN") {
    $("#m").html("19.3");
    $("#n").html("47.6");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Tennessee");
  } else if (state == "TX") {
    $("#m").html("17.3");
    $("#n").html("45.5");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Texas");
  } else if (state == "UT") {
    $("#m").html("17.9");
    $("#n").html("54.6");
    $("#q").html("56.2");
    $("#r").html("4.9");
    // $("#stateChart").html("Utah");
  } else if (state == "VT") {
    $("#m").html("18.9");
    $("#n").html("49.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used as this state does not have data on stage at diagnosis or survival by stage available.)";
    //NATIONAL VALUES NEEDED HERE
    // $("#stateChart").html("Vermont");
  } else if (state == "VA") {
    $("#m").html("19.0");
    $("#n").html("47.8");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for stage by survival as this state does not have these data available.)";
    // $("#stateChart").html("Virginia");
  } else if (state == "WA") {
    $("#m").html("18.2");
    $("#n").html("49.6");
    $("#q").html("63.6");
    $("#r").html("4.5");
    // $("#stateChart").html("Washington");
  } else if (state == "WV") {
    $("#m").html("20.2");
    $("#n").html("50.4");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for Stage by Survival as this state does not have these data available.)";
    // $("#stateChart").html("West Virginia");
  } else if (state == "WI") {
    $("#m").html("18.7");
    $("#n").html("52.0");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for Stage by Survival as this state does not have these data available.)";
    // $("#stateChart").html("Wisconsin");
  } else if (state == "WY") {
    $("#m").html("23.3");
    $("#n").html("47.6");
    $("#q").html("55.3");
    $("#r").html("4.5");
    note = "<br>(National data used for Stage by Survival as this state does not have these data available.)";
    // $("#stateChart").html("Wyoming");
  }



  Highcharts.setOptions({
    colors: ["#7fba00", "#3a75c4"]
  })

  // create instance of chart
  Highcharts.chart('chart5', {
    data: {
      table: 'datatable'
    },
    chart: {
      type: 'column',
      height: 400
    },
    title: {
      text: 'Stage at Diagnosis and 5-Year Survival Rate' + note
    },
    credits: {
      enabled: false
    },
    plotOptions: {
      column: {
        dataLabels: {
          enabled: true,
          crop: false,
          overflow: 'none'
        }
      }
    },
    yAxis: {
      allowDecimals: true,
      title: {
        text: 'Percent (%)'
      }
    },
    tooltip: {
      enabled: false,
      pointFormat: "{point.y:.1f} %"
    }
  });

  // modifications

  var titleTSpans = $(".highcharts-title tspan");
  // if (titleTSpans.length > 1) {
  //   for (var i = 1; i < titleTSpans.length; i++) {
  //     if (titleTSpans[i].innerHTML.toLowerCase() != "survival rate" || titleTSpans[i].innerHTML.toLowerCase() != "rate") {
  //       $(titleTSpans[i]).attr("style", "font-size: 12px !important");
  //     }
  //   }
  // }
  $("#chart5 .highcharts-menu hr").css("margin", "0");
  $("#chart5 .highcharts-legend-item rect:eq(0)").css("fill", "#7fba00");
  $("#chart5 .highcharts-legend-item rect:eq(1)").css("fill", "#3a75c4");
  $("#chart5 .highcharts-series-group > .highcharts-color-0 > rect:eq(0)").css("fill", "#7fba00");
  $("#chart5 .highcharts-series-group > .highcharts-color-0 > rect:eq(1)").css("fill", "#7fba00");
  $("#chart5 .highcharts-series-group > .highcharts-color-1 > rect:eq(0)").css("fill", "#3a75c4");
  $("#chart5 .highcharts-series-group > .highcharts-color-1 > rect:eq(1)").css("fill", "#3a75c4");
  // if (state) {
  //   $("#chart5 .highcharts-title > tspan").html("Percent of Cases by Stage at Diagnosis (" + state + ")");
  // }


  $(".highcharts-button").on("click", function() {
    $(".highcharts-menu hr").css("margin", "0");
  })

  var replaceLabels = function(){
    if ($(".highcharts-xaxis-labels tspan").length == 2) {
      var firstXAxisLabel = $(".highcharts-xaxis-labels tspan")[0];
      var secondXAxisLabel = $(".highcharts-xaxis-labels tspan")[1];
      firstXAxisLabel.innerHTML = "Early Stage";
      secondXAxisLabel.innerHTML = "Late Stage";
      // for IE and Safari (svg and tables do not support innerHTML)
      firstXAxisLabel.textContent = "Early Stage";
      secondXAxisLabel.textContent = "Late Stage";
    } else if ($(".highcharts-xaxis-labels tspan").length == 3) {
      var firstXAxisLabel = $(".highcharts-xaxis-labels tspan")[0];
      var secondXAxisLabel = $(".highcharts-xaxis-labels tspan")[1];
      var thirdXAxisLabel = $(".highcharts-xaxis-labels tspan")[2];
      firstXAxisLabel.innerHTML = "Early Stage";
      secondXAxisLabel.parentNode.removeChild(secondXAxisLabel);
      secondXAxisLabel.innerHTML = "Late Stage";
      // for IE and Safari (svg and tables do not support innerHTML)
      firstXAxisLabel.textContent = "Early Stage";
      secondXAxisLabel.textContent = "Late Stage";
    }
  };
  replaceLabels();
  setTimeout(replaceLabels, 50);
  // $(window).on("resize", function(){
  //   var titleTSpans = $(".highcharts-title tspan");
  //   if (titleTSpans.length > 1) {
  //     for (var i = 1; i < titleTSpans.length; i++) {
  //       if (titleTSpans[i].innerHTML.toLowerCase() != "survival rate" || titleTSpans[i].innerHTML.toLowerCase() != "rate") {
  //         $(titleTSpans[i]).attr("style", "font-size: 12px !important");
  //       }
  //     }
  //   }
  // })

  //brute force replace
  $(window).on("resize", function(){
    setTimeout(replaceLabels, 200);
  })
</script>
