<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chartScreening {
    min-width: 310px;
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/
  .highcharts-axis-title{
    font-family: "Lato", sans-serif;
    font-size: 16px;
    font-weight: bold;
  }

  .highcharts-title {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-grid-line{
    opacity: 0.6;
  }

  @media (max-width: 700px) {
    #chartScreening {
      /*height: 1000px;*/
    }
  }
</style>

<!-- 860px min height before font gets messed up -->
<div id="chartScreening"></div>

<script>
  var state = Cookies.get('state');
  // console.log("state achieved for chart 2");
  // bar on graph changes to green based on state selection
  if (state == "MA") {
    var tooltipScreening = 0;
  } else if (state == "VT") {
    var tooltipScreening = 1;
  } else if (state == "NH") {
    var tooltipScreening = 2;
  } else if (state == "KY") {
    var tooltipScreening = 3;
  } else if (state == "WI") {
    var tooltipScreening = 4;
  } else if (state == "SD") {
    var tooltipScreening = 5;
  } else if (state == "CT") {
    var tooltipScreening = 6;
  } else if (state == "ME") {
    var tooltipScreening = 7;
  } else if (state == "MD") {
    var tooltipScreening = 8;
  } else if (state == "IA") {
    var tooltipScreening = 9;
  } else if (state == "MI") {
    var tooltipScreening = 10;
  } else if (state == "MN") {
    var tooltipScreening = 11;
  } else if (state == "ID") {
    var tooltipScreening = 12;
  } else if (state == "NC") {
    var tooltipScreening = 13;
  } else if (state == "ND") {
    var tooltipScreening = 14;
  } else if (state == "OR") {
    var tooltipScreening = 15;
  } else if (state == "PA") {
    var tooltipScreening = 16;
  } else if (state == "DE") {
    var tooltipScreening = 17;
  } else if (state == "MO") {
    var tooltipScreening = 18;
  } else if (state == "OH") {
    var tooltipScreening = 19;
  } else if (state == "KS") {
    var tooltipScreening = 20;
  } else if (state == "MT") {
    var tooltipScreening = 21;
  } else if (state == "VA") {
    var tooltipScreening = 22;
  } else if (state == "RI") {
    var tooltipScreening = 23;
  } else if (state == "IN") {
    var tooltipScreening = 24;
  } else if (state == "AK") {
    var tooltipScreening = 25;
  } else if (state == "IL") {
    var tooltipScreening = 26;
  } else if (state == "GA") {
    var tooltipScreening = 27;
  } else if (state == "SC") {
    var tooltipScreening = 28;
  } else if (state == "Nation") {
    var tooltipScreening = 29;
  } else if (state == "AL") {
    var tooltipScreening = 30;
  } else if (state == "WA") {
    var tooltipScreening = 31;
  } else if (state == "TN") {
    var tooltipScreening = 32;
  } else if (state == "NY") {
    var tooltipScreening = 33;
  } else if (state == "NE") {
    var tooltipScreening = 34;
  } else if (state == "NJ") {
    var tooltipScreening = 35;
  } else if (state == "MS") {
    var tooltipScreening = 36;
  } else if (state == "HI") {
    var tooltipScreening = 37;
  } else if (state == "CO") {
    var tooltipScreening = 38;
  } else if (state == "UT") {
    var tooltipScreening = 39;
  } else if (state == "AR") {
    var tooltipScreening = 40;
  } else if (state == "FL") {
    var tooltipScreening = 41;
  } else if (state == "WV") {
    var tooltipScreening = 42;
  } else if (state == "DC") {
    var tooltipScreening = 43;
  } else if (state == "LA") {
    var tooltipScreening = 44;
  } else if (state == "TX") {
    var tooltipScreening = 45;
  } else if (state == "AZ") {
    var tooltipScreening = 46;
  } else if (state == "NM") {
    var tooltipScreening = 47;
  } else if (state == "OK") {
    var tooltipScreening = 48;
  } else if (state == "WY") {
    var tooltipScreening = 49;
  } else if (state == "CA") {
    var tooltipScreening = 50;
  } else if (state == "NV") {
    var tooltipScreening = 51;
  } else {
    var tooltipScreening = 29;
  }

  var chartScreening = function() {
    Highcharts.setOptions({
      colors: ["#3a75c4", "#7fba00"]
    })
    Highcharts.chart("chartScreening", {
      chart: {
        events: {
          load: function() {
            var stateBox = this.series[0].points[tooltipScreening];
            this.tooltip.refresh(stateBox);
          }
        },
        type: "column",
        height: 450
      },
      title: {
        text: "State Ranking by High-Risk Screening Rate",
        style: {
          fontWeight: "bold"
        }
      },
      credits: {
        enabled: false
      },
      xAxis: {
        labels: {
          enabled: false
        },
        plotBands: [{
          from: -0.5,
          to: 3.5,
          color: "#ddf5c6",
          label: {
            text: "Top<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 30
          }
        }, {
          from: 3.5,
          to: 15.5,
          color: "#f4faba",
          label: {
            text: "Above<br/>Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 50
          }
        }, {
          from: 15.5,
          to: 33.5,
          color: "#e8eaea",
          label: {
            text: "Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 80
          }
        }, {
          from: 33.5,
          to: 44.5,
          color: "#fdecb8",
          label: {
            text: "Below<br/>Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 150
          }
        }, {
          from: 44.5,
          to: 51.5,
          color: "#fadfbf",
          label: {
            text: "Bottom<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 210
          }
        }],
        categories: [
          "Massachusetts",
          "Vermont",
          "New Hampshire",
          "Kentucky",
          "Wisconsin",
          "South Dakota",
          "Connecticut",
          "Maine",
          "Maryland",
          "Iowa",
          "Michigan",
          "Minnesota",
          "Idaho",
          "North Carolina",
          "North Dakota",
          "Oregon",
          "Pennsylvania",
          "Delaware",
          "Missouri",
          "Ohio",
          "Kansas",
          "Montana",
          "Virginia",
          "Rhode Island",
          "Indiana",
          "Alaska",
          "Illinois",
          "Georgia",
          "South Carolina",
          "Nation",
          "Alabama",
          "Washington",
          "Tennessee",
          "New York",
          "Nebraska",
          "New Jersey",
          "Mississippi",
          "Hawaii",
          "Colorado",
          "Utah",
          "Arkansas",
          "Florida",
          "West Virginia",
          "District of Columbia",
          "Louisiana",
          "Texas",
          "Arizona",
          "New Mexico",
          "Oklahoma",
          "Wyoming",
          "California",
          "Nevada"
        ]
      },
      yAxis: {
        min: 0,
        title: {
          text: "Percent of High-Risk Population Receiving Screening"
        },
        labels: {
          style: {
            "fontSize": "16px"
          }
        }
      },
      legend: {
        reversed: true,
        enabled: false
      },
      plotOptions: {
        series: {
          stacking: "normal"
        }
      },
      tooltip: {
        formatter: function() {
          return '<b>' + this.x + '</b>: ' + Highcharts.numberFormat(this.y, 1);
        },
        style: {
          "fontSize": "16px",
          "fontFamily": "'Lato', sans-serif"
        }
      },
      series: [{
        name: "States",
        data: [
          12.3,
          12.1,
          11.8,
          10.3,
          8.2,
          7.9,
          6.9,
          6.8,
          6.7,
          6.6,
          6.5,
          6.4,
          6.2,
          6.0,
          5.9,
          5.8,
          5.5,
          5.5,
          5.2,
          5.2,
          5.1,
          5.1,
          5.0,
          4.8,
          4.7,
          4.6,
          4.4,
          4.4,
          4.2,
          4.2,
          4.1,
          3.8,
          3.7,
          3.6,
          3.2,
          3.0,
          3.0,
          2.7,
          2.5,
          2.5,
          2.5,
          2.4,
          2.4,
          2.3,
          2.2,
          1.7,
          1.6,
          1.4,
          1.4,
          1.0,
          0.9,
          0.5
        ]
      }],
      dataLabels: {
        style: {
          fontFamily: "'Lato', sans-serif"
        }
      }
    });
    // hide credits
    // $(".highcharts-credits").html("");
  };

  $(document).ready(function() {
    chartScreening();
    $("#chartScreening .highcharts-color-0").css("fill", "#3a75c4");
    $("#chartScreening .highcharts-legend-item rect").css("fill", "#3a75c4");

    var state = Cookies.get('state');
    //  console.log("state achieved for chart 2");
    // bar on graph changes to green based on state selection
    if (state == "MA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(1)").css("fill", "#ed1b2d");
    }
    if (state == "VT") {
      $("#chartScreening .highcharts-series-group rect:nth-child(2)").css("fill", "#ed1b2d");
    }
    if (state == "NH") {
      $("#chartScreening .highcharts-series-group rect:nth-child(3)").css("fill", "#ed1b2d");
    }
    if (state == "KY") {
      $("#chartScreening .highcharts-series-group rect:nth-child(4)").css("fill", "#ed1b2d");
    }
    if (state == "WI") {
      $("#chartScreening .highcharts-series-group rect:nth-child(5)").css("fill", "#ed1b2d");
    }
    if (state == "SD") {
      $("#chartScreening .highcharts-series-group rect:nth-child(6)").css("fill", "#ed1b2d");
    }
    if (state == "CT") {
      $("#chartScreening .highcharts-series-group rect:nth-child(7)").css("fill", "#ed1b2d");
    }
    if (state == "ME") {
      $("#chartScreening .highcharts-series-group rect:nth-child(8)").css("fill", "#ed1b2d");
    }
    if (state == "MD") {
      $("#chartScreening .highcharts-series-group rect:nth-child(9)").css("fill", "#ed1b2d");
    }
    if (state == "IA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(10)").css("fill", "#ed1b2d");
    }
    if (state == "MI") {
      $("#chartScreening .highcharts-series-group rect:nth-child(11)").css("fill", "#ed1b2d");
    }
    if (state == "MN") {
      $("#chartScreening .highcharts-series-group rect:nth-child(12)").css("fill", "#ed1b2d");
    }
    if (state == "ID") {
      $("#chartScreening .highcharts-series-group rect:nth-child(13)").css("fill", "#ed1b2d");
    }
    if (state == "NC") {
      $("#chartScreening .highcharts-series-group rect:nth-child(14)").css("fill", "#ed1b2d");
    }
    if (state == "ND") {
      $("#chartScreening .highcharts-series-group rect:nth-child(15)").css("fill", "#ed1b2d");
    }
    if (state == "OR") {
      $("#chartScreening .highcharts-series-group rect:nth-child(16)").css("fill", "#ed1b2d");
    }
    if (state == "PA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(17)").css("fill", "#ed1b2d");
    }
    if (state == "DE") {
      $("#chartScreening .highcharts-series-group rect:nth-child(18)").css("fill", "#ed1b2d");
    }
    if (state == "MO") {
      $("#chartScreening .highcharts-series-group rect:nth-child(19)").css("fill", "#ed1b2d");
    }
    if (state == "OH") {
      $("#chartScreening .highcharts-series-group rect:nth-child(20)").css("fill", "#ed1b2d");
    }
    if (state == "KS") {
      $("#chartScreening .highcharts-series-group rect:nth-child(21)").css("fill", "#ed1b2d");
    }
    if (state == "MT") {
      $("#chartScreening .highcharts-series-group rect:nth-child(22)").css("fill", "#ed1b2d");
    }
    if (state == "VA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(23)").css("fill", "#ed1b2d");
    }
    if (state == "RI") {
      $("#chartScreening .highcharts-series-group rect:nth-child(24)").css("fill", "#ed1b2d");
    }
    if (state == "IN") {
      $("#chartScreening .highcharts-series-group rect:nth-child(25)").css("fill", "#ed1b2d");
    }
    if (state == "AK") {
      $("#chartScreening .highcharts-series-group rect:nth-child(26)").css("fill", "#ed1b2d");
    }
    if (state == "IL") {
      $("#chartScreening .highcharts-series-group rect:nth-child(27)").css("fill", "#ed1b2d");
    }
    if (state == "GA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(28)").css("fill", "#ed1b2d");
    }
    if (state == "SC") {
      $("#chartScreening .highcharts-series-group rect:nth-child(29)").css("fill", "#ed1b2d");
    }
    if (state == "Nation") {
      $("#chartScreening .highcharts-series-group rect:nth-child(30)").css("fill", "#ed1b2d");
    }
    if (state == "AL") {
      $("#chartScreening .highcharts-series-group rect:nth-child(31)").css("fill", "#ed1b2d");
    }
    if (state == "WA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(32)").css("fill", "#ed1b2d");
    }
    if (state == "TN") {
      $("#chartScreening .highcharts-series-group rect:nth-child(33)").css("fill", "#ed1b2d");
    }
    if (state == "NY") {
      $("#chartScreening .highcharts-series-group rect:nth-child(34)").css("fill", "#ed1b2d");
    }
    if (state == "NE") {
      $("#chartScreening .highcharts-series-group rect:nth-child(35)").css("fill", "#ed1b2d");
    }
    if (state == "NJ") {
      $("#chartScreening .highcharts-series-group rect:nth-child(36)").css("fill", "#ed1b2d");
    }
    if (state == "MS") {
      $("#chartScreening .highcharts-series-group rect:nth-child(37)").css("fill", "#ed1b2d");
    }
    if (state == "HI") {
      $("#chartScreening .highcharts-series-group rect:nth-child(38)").css("fill", "#ed1b2d");
    }
    if (state == "CO") {
      $("#chartScreening .highcharts-series-group rect:nth-child(39)").css("fill", "#ed1b2d");
    }
    if (state == "UT") {
      $("#chartScreening .highcharts-series-group rect:nth-child(40)").css("fill", "#ed1b2d");
    }
    if (state == "AR") {
      $("#chartScreening .highcharts-series-group rect:nth-child(41)").css("fill", "#ed1b2d");
    }
    if (state == "FL") {
      $("#chartScreening .highcharts-series-group rect:nth-child(42)").css("fill", "#ed1b2d");
    }
    if (state == "WV") {
      $("#chartScreening .highcharts-series-group rect:nth-child(43)").css("fill", "#ed1b2d");
    }
    if (state == "DC") {
      $("#chartScreening .highcharts-series-group rect:nth-child(44)").css("fill", "#ed1b2d");
    }
    if (state == "LA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(45)").css("fill", "#ed1b2d");
    }
    if (state == "TX") {
      $("#chartScreening .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    if (state == "AZ") {
      $("#chartScreening .highcharts-series-group rect:nth-child(47)").css("fill", "#ed1b2d");
    }
    if (state == "NM") {
      $("#chartScreening .highcharts-series-group rect:nth-child(48)").css("fill", "#ed1b2d");
    }
    if (state == "OK") {
      $("#chartScreening .highcharts-series-group rect:nth-child(49)").css("fill", "#ed1b2d");
    }
    if (state == "WY") {
      $("#chartScreening .highcharts-series-group rect:nth-child(50)").css("fill", "#ed1b2d");
    }
    if (state == "CA") {
      $("#chartScreening .highcharts-series-group rect:nth-child(51)").css("fill", "#ed1b2d");
    }
    if (state == "NV") {
      $("#chartScreening .highcharts-series-group rect:nth-child(52)").css("fill", "#ed1b2d");
    }
    // nation bar label
    $("#chartScreening .highcharts-series-group rect:nth-child(30)").css("fill", "#555559");

  })
  // var state = function(){
  // }
</script>
