<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chartIncidence {
    /*min-width: 310px;*/
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/

  .highcharts-title {
    font-family: 'Lato', sans-serif !important;
  }
  .highcharts-axis-title{
    font-family: "Lato", sans-serif;
    font-size: 16px;
    font-weight: bold;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-grid-line{
    opacity: 0.6;
  }

  @media (max-width: 700px) {
    #chartIncidence {
      /*height: 1000px;*/
    }
  }
</style>

<!-- 860px min height before font gets messed up -->
<div id="chartIncidence"></div>

<script>
  var state = Cookies.get('state');
  // console.log("state achieved for chart 3");
  // bar on graph changes to green based on state selection
  if (state == "KY") {
    var tooltipInc = 51;
  } else if (state == "WV") {
    var tooltipInc = 50;
  } else if (state == "AR") {
    var tooltipInc = 49;
  } else if (state == "MS") {
    var tooltipInc = 48;
  } else if (state == "TN") {
    var tooltipInc = 47;
  } else if (state == "ME") {
    var tooltipInc = 46;
  } else if (state == "MO") {
    var tooltipInc = 45;
  } else if (state == "IN") {
    var tooltipInc = 44;
  } else if (state == "RI") {
    var tooltipInc = 43;
  } else if (state == "DE") {
    var tooltipInc = 42;
  } else if (state == "OK") {
    var tooltipInc = 41;
  } else if (state == "NC") {
    var tooltipInc = 40;
  } else if (state == "OH") {
    var tooltipInc = 39;
  } else if (state == "LA") {
    var tooltipInc = 38;
  } else if (state == "AL") {
    var tooltipInc = 37;
  } else if (state == "SC") {
    var tooltipInc = 36;
  } else if (state == "IL") {
    var tooltipInc = 35;
  } else if (state == "NH") {
    var tooltipInc = 34;
  } else if (state == "GA") {
    var tooltipInc = 33;
  } else if (state == "MI") {
    var tooltipInc = 32;
  } else if (state == "PA") {
    var tooltipInc = 31;
  } else if (state == "IA") {
    var tooltipInc = 30;
  } else if (state == "VT") {
    var tooltipInc = 29;
  } else if (state == "MA") {
    var tooltipInc = 28;
  } else if (state == "KS") {
    var tooltipInc = 27;
  } else if (state == "CT") {
    var tooltipInc = 26;
  } else if (state == "WI") {
    var tooltipInc = 25;
  } else if (state == "Nation") {
    var tooltipInc = 24;
  } else if (state == "SD") {
    var tooltipInc = 23;
  } else if (state == "FL") {
    var tooltipInc = 22;
  } else if (state == "NY") {
    var tooltipInc = 21;
  } else if (state == "VA") {
    var tooltipInc = 20;
  } else if (state == "NE") {
    var tooltipInc = 19;
  } else if (state == "ND") {
    var tooltipInc = 18;
  } else if (state == "MD") {
    var tooltipInc = 17;
  } else if (state == "NJ") {
    var tooltipInc = 16;
  } else if (state == "MN") {
    var tooltipInc = 15;
  } else if (state == "AK") {
    var tooltipInc = 14;
  } else if (state == "WA") {
    var tooltipInc = 13;
  } else if (state == "NV") {
    var tooltipInc = 12;
  } else if (state == "MT") {
    var tooltipInc = 11;
  } else if (state == "OR") {
    var tooltipInc = 10;
  } else if (state == "DC") {
    var tooltipInc = 9;
  } else if (state == "TX") {
    var tooltipInc = 8;
  } else if (state == "ID") {
    var tooltipInc = 7;
  } else if (state == "AZ") {
    var tooltipInc = 6;
  } else if (state == "HI") {
    var tooltipInc = 5;
  } else if (state == "WY") {
    var tooltipInc = 4;
  } else if (state == "CO") {
    var tooltipInc = 3;
  } else if (state == "CA") {
    var tooltipInc = 2;
  } else if (state == "NM") {
    var tooltipInc = 1;
  } else if (state == "UT") {
    var tooltipInc = 0;
  } else {
    var tooltipInc = 23;
  }

  var tooltipInc = parseInt(tooltipInc);
  // console.log(tooltipInc);

  var chartIncidence = function() {
    Highcharts.setOptions({
      colors: ["#3a75c4", "#7fba00"]
    })
    Highcharts.chart("chartIncidence", {
      chart: {
        events: {
          load: function() {
            var stateBox = this.series[0].points[tooltipInc];
            this.tooltip.refresh(stateBox);
          }
        },
        type: "column",
        height: 450
      },
      title: {
        text: "State Ranking by Incidence Rate",
        style: {
          fontWeight: "bold"
        }
      },
      xAxis: {
        labels: {
          enabled: false
        },
        plotBands: [{
          from: -0.5,
          to: 1.5,
          color: "#ddf5c6",
          label: {
            text: "Top<br>Tier",
            style: {
              color: "#000000",
            },
            y: 140
          }
        },{
          from: 1.5,
          to: 8.5,
          color: "#f4faba",
          label: {
            text: "Above<br>Average<br>Tier",
            style: {
              color: "#000000",
            },
            y: 90
          }
        },{
          from: 8.5,
          to: 36.5,
          color: "#e8eaea",
          label: {
            text: "Average<br>Tier",
            style: {
              color: "#000000",
            },
            y: 60
          }
        },{
          from: 36.5,
          to: 49.5,
          color: "#fdecb8",
          label: {
            text: "Below<br>Average<br>Tier",
            style: {
              color: "#000000",
            },
            y: 30
          }
        },{
          from: 49.5,
          to: 52,
          color: "#fadfbf",
          label: {
            text: "Bottom<br>Tier",
            style: {
              color: "#000000",
            },
            y: 10
          }
        }
      ],
        categories: ["Utah",
        "New Mexico",
        "California",
        "Colorado",
        "Wyoming",
        "Hawaii",
        "Arizona",
        "Idaho",
        "Texas",
        "District of Columbia",
        "Oregon",
        "Montana",
        "Nevada",
        "Washington",
        "Alaska",
        "Minnesota",
        "New Jersey",
        "Maryland",
        "North Dakota",
        "Nebraska",
        "Virginia",
        "New York",
        "Florida",
        "South Dakota",
        "Nation",
        "Wisconsin",
        "Connecticut",
        "Kansas",
        "Massachusetts",
        "Vermont",
        "Iowa",
        "Pennsylvania",
        "Michigan",
        "Georgia",
        "New Hampshire",
        "Illinois",
        "South Carolina",
        "Alabama",
        "Louisiana",
        "Ohio",
        "North Carolina",
        "Oklahoma",
        "Delaware",
        "Rhode Island",
        "Indiana",
        "Missouri",
        "Maine",
        "Tennessee",
        "Mississippi",
        "Arkansas",
        "West Virginia",
        "Kentucky"
        ]
      },
      yAxis: {
        min: 0,
        title: {
          text: "Age-Adjusted Lung Cancer Incidence Rate per 100,000",
          style: {
            fontWeight: "bold"
          }
        },
        labels: {
          style: {
            "fontSize": "16px"
          }
        }
      },
      legend: {
        reversed: true,
        enabled: false
      },
      plotOptions: {
        series: {
          stacking: "normal"
        }
      },
      series: [{
        name: "States",
        data: [
          27.1,
          39.9,
          42.3,
          42.8,
          44.3,
          46.0,
          48.5,
          50.6,
          52.2,
          53.4,
          54.9,
          55.3,
          56.1,
          56.1,
          56.3,
          56.3,
          56.6,
          56.8,
          57.6,
          58.1,
          58.8,
          59.3,
          59.3,
          59.4,
          59.6,
          60.1,
          60.2,
          60.9,
          62.0,
          62.6,
          63.5,
          64.4,
          64.5,
          64.5,
          64.7,
          65.0,
          65.8,
          66.7,
          67.9,
          68.9,
          69.0,
          69.5,
          69.9,
          71.0,
          73.2,
          73.2,
          74.0,
          75.5,
          75.8,
          78.6,
          79.6,
          92.6
        ]
      }],
      dataLabels: {
        style: {
          fontFamily: "'Lato', sans-serif"
        }
      },
      credits: {
        enabled: false
      },

      tooltip: {
        formatter: function() {
          return '<b>' + this.x + '</b>: ' + Highcharts.numberFormat(this.y, 1);
        },
        style: {
          "fontSize": "16px",
          "fontFamily": "'Lato', sans-serif"
        }
      }

    });
    // hide credits
    // $(".highcharts-credits").html("");
  };

  $(document).ready(function() {
    chartIncidence();
    // $("#chartIncidence .highcharts-color-0").css("fill", "#3a75c4");
    // $("#chartIncidence .highcharts-legend-item rect").css("fill", "#3a75c4");


    var state = Cookies.get("state");
    // bar on graph changes to green based on state selection
    if (state == "KY") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(52)").css("fill", "#ed1b2d");
    }
    else if (state == "WV") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(51)").css("fill", "#ed1b2d");
    }
    else if (state == "AR") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(50)").css("fill", "#ed1b2d");
    }
    else if (state == "MS") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(49)").css("fill", "#ed1b2d");
    }
    else if (state == "TN") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(48)").css("fill", "#ed1b2d");
    }
    else if (state == "ME") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(47)").css("fill", "#ed1b2d");
    }
    else if (state == "MO") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    else if (state == "IN") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(45)").css("fill", "#ed1b2d");
    }
    else if (state == "RI") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(44)").css("fill", "#ed1b2d");
    }
    else if (state == "DE") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(43)").css("fill", "#ed1b2d");
    }
    else if (state == "OK") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(42)").css("fill", "#ed1b2d");
    }
    else if (state == "NC") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(41)").css("fill", "#ed1b2d");
    }
    else if (state == "OH") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(40)").css("fill", "#ed1b2d");
    }
    else if (state == "LA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(39)").css("fill", "#ed1b2d");
    }
    else if (state == "AL") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(38)").css("fill", "#ed1b2d");
    }
    else if (state == "SC") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(37)").css("fill", "#ed1b2d");
    }
    else if (state == "IL") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(36)").css("fill", "#ed1b2d");
    }
    else if (state == "NH") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(35)").css("fill", "#ed1b2d");
    }
    else if (state == "GA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(34)").css("fill", "#ed1b2d");
    }
    else if (state == "MI") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(33)").css("fill", "#ed1b2d");
    }
    else if (state == "PA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(32)").css("fill", "#ed1b2d");
    }
    else if (state == "IA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(31)").css("fill", "#ed1b2d");
    }
    else if (state == "VT") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(30)").css("fill", "#ed1b2d");
    }
    else if (state == "MA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(29)").css("fill", "#ed1b2d");
    }
    else if (state == "KS") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(28)").css("fill", "#ed1b2d");
    }
    else if (state == "CT") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(27)").css("fill", "#ed1b2d");
    }
    else if (state == "WI") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(26)").css("fill", "#ed1b2d");
    }
    else if (state == "Nation") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(25)").css("fill", "#ed1b2d");
    }
    else if (state == "SD") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(24)").css("fill", "#ed1b2d");
    }
    else if (state == "FL") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(23)").css("fill", "#ed1b2d");
    }
    else if (state == "NY") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(22)").css("fill", "#ed1b2d");
    }
    else if (state == "VA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(21)").css("fill", "#ed1b2d");
    }
    else if (state == "NE") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(20)").css("fill", "#ed1b2d");
    }
    else if (state == "ND") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(19)").css("fill", "#ed1b2d");
    }
    else if (state == "MD") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(18)").css("fill", "#ed1b2d");
    }
    else if (state == "NJ") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(17)").css("fill", "#ed1b2d");
    }
    else if (state == "MN") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(16)").css("fill", "#ed1b2d");
    }
    else if (state == "AK") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(15)").css("fill", "#ed1b2d");
    }
    else if (state == "WA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(14)").css("fill", "#ed1b2d");
    }
    else if (state == "NV") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(13)").css("fill", "#ed1b2d");
    }
    else if (state == "MT") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(12)").css("fill", "#ed1b2d");
    }
    else if (state == "OR") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(11)").css("fill", "#ed1b2d");
    }
    else if (state == "DC") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(10)").css("fill", "#ed1b2d");
    }
    else if (state == "TX") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(9)").css("fill", "#ed1b2d");
    }
    else if (state == "ID") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(8)").css("fill", "#ed1b2d");
    }
    else if (state == "AZ") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(7)").css("fill", "#ed1b2d");
    }
    else if (state == "HI") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(6)").css("fill", "#ed1b2d");
    }
    else if (state == "WY") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(5)").css("fill", "#ed1b2d");
    }
    else if (state == "CO") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(4)").css("fill", "#ed1b2d");
    }
    else if (state == "CA") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(3)").css("fill", "#ed1b2d");
    }
    else if (state == "NM") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(2)").css("fill", "#ed1b2d");
    }
    else if (state == "UT") {
      $("#chartIncidence .highcharts-series-group rect:nth-child(1)").css("fill", "#ed1b2d");
    }
    //nationwide highlight
    $("#chartIncidence .highcharts-series-group rect:nth-child(25)").css("fill", "#555559");


  })
  // var state = function(){
  // }
</script>
