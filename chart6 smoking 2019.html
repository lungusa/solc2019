<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chartSmoking {
    /*min-width: 310px;*/
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/

  .highcharts-title {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-title{
    font-family: "Lato", sans-serif;
    font-size: 16px;
    font-weight: bold;
  }

  .highcharts-grid-line{
    opacity: 0.6;
  }

  @media (max-width: 700px) {
    #chartSmoking {
      /*height: 1000px;*/
    }
  }
</style>

<!-- 860px min height before font gets messed up -->
<div id="chartSmoking"></div>

<script>
  var state = Cookies.get('state');
  // console.log("state achieved for chart 3");
  // bar on graph changes to green based on state selection
  if (state == "UT") {
    var tooltipSmoking = 0;
  } else if (state == "CA") {
    var tooltipSmoking = 1;
  } else if (state == "CT") {
    var tooltipSmoking = 2;
  } else if (state == "HI") {
    var tooltipSmoking = 3;
  } else if (state == "WA") {
    var tooltipSmoking = 4;
  } else if (state == "MA") {
    var tooltipSmoking = 5;
  } else if (state == "NJ") {
    var tooltipSmoking = 6;
  } else if (state == "MD") {
    var tooltipSmoking = 7;
  } else if (state == "NY") {
    var tooltipSmoking = 8;
  } else if (state == "DC") {
    var tooltipSmoking = 9;
  } else if (state == "ID") {
    var tooltipSmoking = 10;
  } else if (state == "MN") {
    var tooltipSmoking = 11;
  } else if (state == "CO") {
    var tooltipSmoking = 12;
  } else if (state == "RI") {
    var tooltipSmoking = 13;
  } else if (state == "NE") {
    var tooltipSmoking = 14;
  } else if (state == "IL") {
    var tooltipSmoking = 15;
  } else if (state == "AZ") {
    var tooltipSmoking = 16;
  } else if (state == "NH") {
    var tooltipSmoking = 17;
  } else if (state == "TX") {
    var tooltipSmoking = 18;
  } else if (state == "VT") {
    var tooltipSmoking = 19;
  } else if (state == "WI") {
    var tooltipSmoking = 20;
  } else if (state == "OR") {
    var tooltipSmoking = 21;
  } else if (state == "FL") {
    var tooltipSmoking = 22;
  } else if (state == "VA") {
    var tooltipSmoking = 23;
  } else if (state == "Nation") {
    var tooltipSmoking = 24;
  } else if (state == "DE") {
    var tooltipSmoking = 25;
  } else if (state == "IA") {
    var tooltipSmoking = 26;
  } else if (state == "MT") {
    var tooltipSmoking = 27;
  } else if (state == "NC") {
    var tooltipSmoking = 28;
  } else if (state == "ME") {
    var tooltipSmoking = 29;
  } else if (state == "KS") {
    var tooltipSmoking = 30;
  } else if (state == "GA") {
    var tooltipSmoking = 31;
  } else if (state == "NM") {
    var tooltipSmoking = 32;
  } else if (state == "NV") {
    var tooltipSmoking = 33;
  } else if (state == "ND") {
    var tooltipSmoking = 34;
  } else if (state == "WY") {
    var tooltipSmoking = 35;
  } else if (state == "PA") {
    var tooltipSmoking = 36;
  } else if (state == "SC") {
    var tooltipSmoking = 37;
  } else if (state == "SD") {
    var tooltipSmoking = 38;
  } else if (state == "MI") {
    var tooltipSmoking = 39;
  } else if (state == "OK") {
    var tooltipSmoking = 40;
  } else if (state == "MO") {
    var tooltipSmoking = 41;
  } else if (state == "AL") {
    var tooltipSmoking = 42;
  } else if (state == "AK") {
    var tooltipSmoking = 43;
  } else if (state == "OH") {
    var tooltipSmoking = 44;
  } else if (state == "IN") {
    var tooltipSmoking = 45;
  } else if (state == "MS") {
    var tooltipSmoking = 46;
  } else if (state == "AR") {
    var tooltipSmoking = 47;
  } else if (state == "TN") {
    var tooltipSmoking = 48;
  } else if (state == "LA") {
    var tooltipSmoking = 49;
  } else if (state == "KY") {
    var tooltipSmoking = 50;
  } else if (state == "WV") {
    var tooltipSmoking = 51;
  } else {
    var tooltipSmoking = 24;
  }

  var tooltipSmoking = parseInt(tooltipSmoking);
  // console.log(tooltipSmoking);

  var chartSmoking = function() {
    Highcharts.setOptions({
      colors: ["#3a75c4", "#7fba00"]
    })
    Highcharts.chart("chartSmoking", {
      chart: {
        events: {
          load: function() {
            var stateBox = this.series[0].points[tooltipSmoking];
            this.tooltip.refresh(stateBox);
          }
        },
        type: "column",
        height: 450
      },
      title: {
        text: "State Ranking by Smoking Rate",
        style: {
          fontWeight: "bold"
        }
      },
      xAxis: {
        labels: {
          enabled: false
        },
        plotBands: [{
          from: -0.5,
          to: 1.5,
          color: "#a5db30",
          label: {
            text: "Top<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 140
          }
        },{
          from: 1.5,
          to: 12.5,
          color: "#fcffc4",
          label: {
            text: "Above<br/>Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 100
          }
        },{
          from: 12.5,
          to: 34.5,
          color: "#cbd3d6",
          label: {
            text: "Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 80
          }
        },{
          from: 34.5,
          to: 45.5,
          color: "#ffdeba",
          label: {
            text: "Below<br/>Average<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 50
          }
        },{
          from: 45.5,
          to: 51.5,
          color: "#ffbb73",
          label: {
            text: "Bottom<br/>Tier",
            style: {
              color: "#000000",
            },
            y: 30
          }
        }
      ],
        categories: [
        "Utah",
        "California",
        "Connecticut",
        "Hawaii",
        "Washington",
        "Massachusetts",
        "New Jersey",
        "Maryland",
        "New York",
        "District of Columbia",
        "Idaho",
        "Minnesota",
        "Colorado",
        "Rhode Island",
        "Nebraska",
        "Illinois",
        "Arizona",
        "New Hampshire",
        "Texas",
        "Vermont",
        "Wisconsin",
        "Oregon",
        "Florida",
        "Virginia",
        "Nation",
        "Delaware",
        "Iowa",
        "Montana",
        "North Carolina",
        "Maine",
        "Kansas",
        "Georgia",
        "New Mexico",
        "Nevada",
        "North Dakota",
        "Wyoming",
        "Pennsylvania",
        "South Carolina",
        "South Dakota",
        "Michigan",
        "Oklahoma",
        "Missouri",
        "Alabama",
        "Alaska",
        "Ohio",
        "Indiana",
        "Mississippi",
        "Arkansas",
        "Tennessee",
        "Louisiana",
        "Kentucky",
        "West Virginia"
        ]
      },
      yAxis: {
        min: 0,
        title: {
          text: "Percent of Adults Who Are Current Smokers"
        },
        labels: {
          style: {
            "fontSize": "16px"
          }
        }
      },
      legend: {
        reversed: true,
        enabled: false
      },
      plotOptions: {
        series: {
          stacking: "normal"
        }
      },
      series: [{
        name: "States",
        data: [
            8.9,
            11.3,
            12.7,
            12.8,
            13.5,
            13.7,
            13.7,
            13.8,
            14.1,
            14.3,
            14.3,
            14.5,
            14.6,
            14.9,
            15.4,
            15.5,
            15.6,
            15.7,
            15.7,
            15.8,
            16.0,
            16.1,
            16.1,
            16.4,
            16.4,
            17.0,
            17.1,
            17.2,
            17.2,
            17.3,
            17.4,
            17.5,
            17.5,
            17.6,
            18.3,
            18.7,
            18.7,
            18.8,
            19.3,
            19.3,
            20.1,
            20.8,
            20.9,
            21.0,
            21.1,
            21.8,
            22.2,
            22.3,
            22.6,
            23.1,
            24.6,
            26.0
        ]
      }],
      dataLabels: {
        style: {
          fontFamily: "'Lato', sans-serif"
        }
      },
      credits: {
        enabled: false
      },

      tooltip: {
        formatter: function() {
          return '<b>' + this.x + '</b>: ' + Highcharts.numberFormat(this.y, 1);
        },
        style: {
          "fontSize": "16px",
          "fontFamily": "'Lato', sans-serif"
        }
      }

    });
    // hide credits
    // $(".highcharts-credits").html("");
  };

  $(document).ready(function() {
    chartSmoking();
    // $("#chartSmoking .highcharts-color-0").css("fill", "#3a75c4");
    // $("#chartSmoking .highcharts-legend-item rect").css("fill", "#3a75c4");


    var state = Cookies.get("state");
    // bar on graph changes to green based on state selection
    if (state == "UT") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(1)").css("fill", "#ed1b2d");
    }
    else if (state == "CA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(2)").css("fill", "#ed1b2d");
    }
    else if (state == "CT") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(3)").css("fill", "#ed1b2d");
    }
    else if (state == "HI") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(4)").css("fill", "#ed1b2d");
    }
    else if (state == "WA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(5)").css("fill", "#ed1b2d");
    }
    else if (state == "MA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(6)").css("fill", "#ed1b2d");
    }
    else if (state == "NJ") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(7)").css("fill", "#ed1b2d");
    }
    else if (state == "MD") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(8)").css("fill", "#ed1b2d");
    }
    else if (state == "NY") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(9)").css("fill", "#ed1b2d");
    }
    else if (state == "DC") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(10)").css("fill", "#ed1b2d");
    }
    else if (state == "ID") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(11)").css("fill", "#ed1b2d");
    }
    else if (state == "MN") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(12)").css("fill", "#ed1b2d");
    }
    else if (state == "CO") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(13)").css("fill", "#ed1b2d");
    }
    else if (state == "RI") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(14)").css("fill", "#ed1b2d");
    }
    else if (state == "NE") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(15)").css("fill", "#ed1b2d");
    }
    else if (state == "IL") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(16)").css("fill", "#ed1b2d");
    }
    else if (state == "AZ") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(17)").css("fill", "#ed1b2d");
    }
    else if (state == "NH") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(18)").css("fill", "#ed1b2d");
    }
    else if (state == "TX") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(19)").css("fill", "#ed1b2d");
    }
    else if (state == "VT") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(20)").css("fill", "#ed1b2d");
    }
    else if (state == "WI") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(21)").css("fill", "#ed1b2d");
    }
    else if (state == "OR") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(22)").css("fill", "#ed1b2d");
    }
    else if (state == "FL") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(23)").css("fill", "#ed1b2d");
    }
    else if (state == "VA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(24)").css("fill", "#ed1b2d");
    }
    else if (state == "Nation") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(25)").css("fill", "#ed1b2d");
    }
    else if (state == "DE") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(26)").css("fill", "#ed1b2d");
    }
    else if (state == "IA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(27)").css("fill", "#ed1b2d");
    }
    else if (state == "MT") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(28)").css("fill", "#ed1b2d");
    }
    else if (state == "NC") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(29)").css("fill", "#ed1b2d");
    }
    else if (state == "ME") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(30)").css("fill", "#ed1b2d");
    }
    else if (state == "KS") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(31)").css("fill", "#ed1b2d");
    }
    else if (state == "GA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(32)").css("fill", "#ed1b2d");
    }
    else if (state == "NM") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(33)").css("fill", "#ed1b2d");
    }
    else if (state == "NV") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(34)").css("fill", "#ed1b2d");
    }
    else if (state == "ND") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(35)").css("fill", "#ed1b2d");
    }
    else if (state == "WY") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(36)").css("fill", "#ed1b2d");
    }
    else if (state == "PA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(37)").css("fill", "#ed1b2d");
    }
    else if (state == "SC") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(38)").css("fill", "#ed1b2d");
    }
    else if (state == "SD") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(39)").css("fill", "#ed1b2d");
    }
    else if (state == "MI") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(40)").css("fill", "#ed1b2d");
    }
    else if (state == "OK") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(41)").css("fill", "#ed1b2d");
    }
    else if (state == "MO") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(42)").css("fill", "#ed1b2d");
    }
    else if (state == "AL") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(43)").css("fill", "#ed1b2d");
    }
    else if (state == "AK") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(44)").css("fill", "#ed1b2d");
    }
    else if (state == "OH") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(45)").css("fill", "#ed1b2d");
    }
    else if (state == "IN") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    else if (state == "MS") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(47)").css("fill", "#ed1b2d");
    }
    else if (state == "AR") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(48)").css("fill", "#ed1b2d");
    }
    else if (state == "TN") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(49)").css("fill", "#ed1b2d");
    }
    else if (state == "LA") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(50)").css("fill", "#ed1b2d");
    }
    else if (state == "KY") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(51)").css("fill", "#ed1b2d");
    }
    else if (state == "WV") {
      $("#chartSmoking .highcharts-series-group rect:nth-child(52)").css("fill", "#ed1b2d");
    }
    //nationwide highlight
    $("#chartSmoking .highcharts-series-group rect:nth-child(25)").css("fill", "#555559");


  })
  // var state = function(){
  // }
</script>
