<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<style media="screen">
  #chartSurvival {
    min-width: 310px;
    width: 100%;
    /*height must be a minimum of 860px*/
    /*min-height: 860px;*/
    /*height: 1000px;*/
    margin: 0 auto;
  }

  .highcharts-background {
    fill: transparent;
  }

  /*body{
    background: url("https://images.unsplash.com/photo-1463780324318-d1a8ddc05a11") no-repeat center center fixed;
  }*/

  .highcharts-title {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-legend {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-axis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  .highcharts-xaxis-labels {
    font-family: 'Lato', sans-serif !important;
  }

  @media (max-width: 700px) {
    #chartSurvival {
      /*height: 1000px;*/
    }
  }
</style>

<!-- 860px min height before font gets messed up -->
<div id="chartSurvival"></div>

<script>
  var state = Cookies.get('state');
  // bar on graph changes to green based on state selection
  if (state == "CT") {
    var slot4 = 0
  } else if (state == "NY") {
    var slot4 = 1;
  } else if (state == "MN") {
    var slot4 = 2;
  } else if (state == "MD") {
    var slot4 = 3;
  } else if (state == "CO") {
    var slot4 = 4;
  } else if (state == "NJ") {
    var slot4 = 5;
  } else if (state == "NH") {
    var slot4 = 6;
  } else if (state == "IL") {
    var slot4 = 7;
  } else if (state == "RI") {
    var slot4 = 8;
  } else if (state == "ND") {
    var slot4 = 9;
  } else if (state == "MI") {
    var slot4 = 10;
  } else if (state == "VT") {
    var slot4 = 11;
  } else if (state == "FL") {
    var slot4 = 12;
  } else if (state == "OR") {
    var slot4 = 13;
  } else if (state == "PA") {
    var slot4 = 14;
  } else if (state == "WA") {
    var slot4 = 15;
  } else if (state == "WI") {
    var slot4 = 16;
  } else if (state == "ME") {
    var slot4 = 17;
  } else if (state == "Nation") {
    var slot4 = 18;
  } else if (state == "DE") {
    var slot4 = 19;
  } else if (state == "NC") {
    var slot4 = 20;
  } else if (state == "CA") {
    var slot4 = 21;
  } else if (state == "VA") {
    var slot4 = 22;
  } else if (state == "AZ") {
    var slot4 = 23;
  } else if (state == "UT") {
    var slot4 = 24;
  } else if (state == "TX") {
    var slot4 = 25;
  } else if (state == "ID") {
    var slot4 = 26;
  } else if (state == "NE") {
    var slot4 = 27;
  } else if (state == "OH") {
    var slot4 = 28;
  } else if (state == "MT") {
    var slot4 = 29;
  } else if (state == "MO") {
    var slot4 = 30;
  } else if (state == "NM") {
    var slot4 = 32;
  } else if (state == "SC") {
    var slot4 = 33;
  } else if (state == "GA") {
    var slot4 = 34;
  } else if (state == "WY") {
    var slot4 = 35;
  } else if (state == "IA") {
    var slot4 = 36;
  } else if (state == "TN") {
    var slot4 = 37;
  } else if (state == "HI") {
    var slot4 = 38;
  } else if (state == "WV") {
    var slot4 = 39;
  } else if (state == "AR") {
    var slot4 = 40;
  } else if (state == "OK") {
    var slot4 = 41;
  } else if (state == "KY") {
    var slot4 = 42;
  } else if (state == "AK") {
    var slot4 = 43;
  } else if (state == "LA") {
    var slot4 = 44;
  } else if (state == "MS") {
    var slot4 = 45;
  } else if (state == "AL") {
    var slot4 = 46;
  } else {
    var slot4 = 18;
  }

  var chartSurvival = function() {
    Highcharts.setOptions({
      colors: ["#3a75c4", "#7fba00"]
    })


    Highcharts.chart("chartSurvival", {
      chart: {
        events: {
          load: function() {
            var stateBox = this.series[0].points[slot4];
            this.tooltip.refresh(stateBox);
          }
        },
        type: "column",
        height: 500
      },
      title: {
        text: "State Ranking by Survival Rate"
      },
      tooltip: {
        formatter: function() {
          return '<b>' + this.x + '</b>: ' + Highcharts.numberFormat(this.y, 1);
        }
      },
      xAxis: {
        labels: {
          enabled: false
        },
        plotBands: [{
            from: 0,
            to: 6.5,
            color: "#e6ffb0",
            label: {
              text: "Top",
              style: {
                color: "#000000"
              },
              y: 10
            }
          },
          {
            from: 6.5,
            to: 13.5,
            color: "#9cf6ff",
            label: {
              text: "Above Average",
              style: {
                color: "#000000"
              },
              y: 10
            }
          },
          {
            from: 13.5,
            to: 25.5,
            color: "#d7e6fa",
            label: {
              text: "Average",
              style: {
                color: "#000000"
              },
              y: 10
            }
          },
          {
            from: 25.5,
            to: 35.5,
            color: "#cbd3d6",
            label: {
              text: "Below Average",
              style: {
                color: "#000000"
              },
              y: 10
            }
          }, {
            from: 35.5,
            to: 45.5,
            color: "#ffd6da",
            label: {
              text: "Bottom",
              style: {
                color: "#000000"
              },
              y: 10
            }
          }
        ],

        categories: [
          "Connecticut",
          "New York",
          "Minnesota",
          "Maryland",
          "Colorado",
          "New Jersey",
          "New Hampshire",
          "Illinois",
          "Rhode Island",
          "North Dakota",
          "Michigan",
          "Vermont",
          "Florida",
          "Oregon",
          "Pennsylvania",
          "Washington",
          "Wisconsin",
          "Maine",
          "Nation",
          "Delaware",
          "North Carolina",
          "California",
          "Virginia",
          "Arizona",
          "Utah",
          "Texas",
          "Idaho",
          "Nebraska",
          "Ohio",
          "Montana",
          "Missouri",
          "New Mexico",
          "South Carolina",
          "Georgia",
          "Wyoming",
          "Iowa",
          "Tennessee",
          "Hawaii",
          "West Virginia",
          "Arkansas",
          "Oklahoma",
          "Kentucky",
          "Alaska",
          "Louisiana",
          "Mississippi",
          "Alabama"
        ]
      },
      yAxis: {
        min: 0,
        title: {
          text: "5 year survival rate"
        }
      },
      legend: {
        reversed: true,
        enabled: false
      },
      plotOptions: {
        series: {
          stacking: "normal"
        }
      },
      credits: {
        enabled: false
      },
      series: [{
        name: "States",
        data: [
          26.4,
          26.4,
          26.0,
          25.6,
          25.3,
          25.0,
          24.8,
          23.8,
          23.7,
          23.3,
          23.2,
          23.1,
          23.1,
          22.7,
          22.6,
          22.5,
          22.3,
          21.9,
          21.7,
          21.6,
          21.5,
          21.5,
          21.4,
          21.4,
          21.4,
          20.9,
          20.7,
          20.6,
          20.0,
          20.0,
          19.6,
          19.6,
          19.5,
          19.3,
          19.2,
          19.1,
          18.7,
          18.7,
          18.2,
          18.1,
          17.7,
          17.6,
          17.6,
          17.0,
          16.9,
          16.8
        ]
      }],
      dataLabels: {
        style: {
          fontFamily: "'Lato', sans-serif"
        }
      }
    });
    // hide credits
    // $(".highcharts-credits").html("");
  };

  $(document).ready(function() {
    chartSurvival();
    $("#chartSurvival .highcharts-color-0").css("fill", "#3a75c4");
    $("#chartSurvival .highcharts-legend-item rect").css("fill", "#3a75c4");

    var state = Cookies.get('state');
    // bar on graph changes to green based on state selection
    if (state == "CT") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(1)").css("fill", "#ed1b2d");
    }
    if (state == "NY") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(2)").css("fill", "#ed1b2d");
    }
    if (state == "MN") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(3)").css("fill", "#ed1b2d");
    }
    if (state == "MD") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(4)").css("fill", "#ed1b2d");
    }
    if (state == "CO") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(5)").css("fill", "#ed1b2d");
    }
    if (state == "NJ") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(6)").css("fill", "#ed1b2d");
    }
    if (state == "NH") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(7)").css("fill", "#ed1b2d");
    }
    if (state == "IL") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(8)").css("fill", "#ed1b2d");
    }
    if (state == "RI") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(9)").css("fill", "#ed1b2d");
    }
    if (state == "ND") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(10)").css("fill", "#ed1b2d");
    }
    if (state == "MI") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(11)").css("fill", "#ed1b2d");
    }
    if (state == "VT") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(12)").css("fill", "#ed1b2d");
    }
    if (state == "FL") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(13)").css("fill", "#ed1b2d");
    }
    if (state == "FL") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(14)").css("fill", "#ed1b2d");
    }
    if (state == "OR") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(15)").css("fill", "#ed1b2d");
    }
    if (state == "PA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(16)").css("fill", "#ed1b2d");
    }
    if (state == "WA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(17)").css("fill", "#ed1b2d");
    }
    if (state == "WI") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(18)").css("fill", "#ed1b2d");
    }
    if (state == "ME") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(19)").css("fill", "#ed1b2d");
    }
    if (state == "Nation") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(20)").css("fill", "#ed1b2d");
    }
    if (state == "DE") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(21)").css("fill", "#ed1b2d");
    }
    if (state == "NC") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(22)").css("fill", "#ed1b2d");
    }
    if (state == "CA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(23)").css("fill", "#ed1b2d");
    }
    if (state == "VA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(24)").css("fill", "#ed1b2d");
    }
    if (state == "AZ") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(25)").css("fill", "#ed1b2d");
    }
    if (state == "UT") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(26)").css("fill", "#ed1b2d");
    }
    if (state == "TX") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(27)").css("fill", "#ed1b2d");
    }
    if (state == "ID") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(28)").css("fill", "#ed1b2d");
    }
    if (state == "NE") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(29)").css("fill", "#ed1b2d");
    }
    if (state == "OH") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(30)").css("fill", "#ed1b2d");
    }
    if (state == "MT") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(31)").css("fill", "#ed1b2d");
    }
    if (state == "MO") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(33)").css("fill", "#ed1b2d");
    }
    if (state == "NM") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(34)").css("fill", "#ed1b2d");
    }
    if (state == "SC") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(35)").css("fill", "#ed1b2d");
    }
    if (state == "GA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(36)").css("fill", "#ed1b2d");
    }
    if (state == "WY") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(37)").css("fill", "#ed1b2d");
    }
    if (state == "IA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(38)").css("fill", "#ed1b2d");
    }
    if (state == "TN") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(39)").css("fill", "#ed1b2d");
    }
    if (state == "HI") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(40)").css("fill", "#ed1b2d");
    }
    if (state == "WV") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(41)").css("fill", "#ed1b2d");
    }
    if (state == "AR") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(42)").css("fill", "#ed1b2d");
    }
    if (state == "OK") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(43)").css("fill", "#ed1b2d");
    }
    if (state == "KY") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(44)").css("fill", "#ed1b2d");
    }
    if (state == "AK") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(45)").css("fill", "#ed1b2d");
    }
    if (state == "LA") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    if (state == "MS") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }
    if (state == "AL") {
      $("#chartSurvival .highcharts-series-group rect:nth-child(46)").css("fill", "#ed1b2d");
    }



    //nationwide highlight
    $("#chartSurvival .highcharts-series-group rect:nth-child(19)").css("fill", "#7fba00");

  })
  // var state = function(){
  // }
</script>
